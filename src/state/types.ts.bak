export type DecisionNode = {
  id: string;
  type: 'question' | 'video' | 'result';
  text: string;
  description?: string;
  options?: { label: string; nextId: string }[];

  // video
  videoId?: string;

  // premium + progression metadata
  isPremium?: boolean;
  journeyName?: string;
  prescriptionFrequency?: string;
  prescriptionDuration?: number;
  replaces?: string[];

  // library categorization
  libraryCategory?: 'Supine' | 'Prone' | 'Side Lying' | 'Quadruped' | 'MDT';

  // optional informational flags (UI can ignore these for now)
  flagLevel?: 'green' | 'yellow' | 'red';
  flagText?: string;
};

export type PainLogEntry = {
  date: string; // YYYY-MM-DD
  score: number; // 0-10
  status: 'Better' | 'Same' | 'Worse';
};

export type UserData = {
  activeJourney: string | null;
  activePrescriptions: string[];
  history: string[];
  currentNodeId: string;

  isPremium: boolean;
  hasAgreedToTerms: boolean;
  painLog: PainLogEntry[];

  // Phase gating
  phaseLocks?: Record<string, number>; // Date.now() timestamps
  lastCheckInAt?: string; // YYYY-MM-DD
};
